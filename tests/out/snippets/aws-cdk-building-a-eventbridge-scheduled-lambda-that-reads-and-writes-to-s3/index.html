<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=yes" />
    <meta name="generator" content="Pelican 4.7.1" />
<meta name="author" content="Rehan Haider">
<meta name="keywords" content="Python, AWS, CloudFormation, lambda, serverless, docker, container, cdk">
    <meta name="description" content=" A guide to building a serverless app using EventBridge, Lambda &amp; s3 while introducing how to create, configure, test and deploy a CDK project using Python ">
    <link rel="canonical" href="http://localhost:8080/snippets/aws-cdk-building-a-eventbridge-scheduled-lambda-that-reads-and-writes-to-s3">

    <!-- Prefetches -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
    <link rel="prefetch" as="script" href="/assets/js/app.js" />

    <!-- Title -->
    <title> AWS CDK: Building a EventBridge scheduled Lambda that reads and writes to s3 </title>
    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="/assets/img/icons/favicon.svg">
    <link rel="icon" type="image/png" href="/assets/img/icons/favicon.png">
    <!-- App icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="manifest" href="/assets/site.webmanifest">
    <meta name="msapplication-TileColor" content="#fdf6e3">
    <meta name="msapplication-config" content="/assets/browserconfig.xml">
    <meta name="theme-color" content="#fff">

    <!-- Social -->
    <meta property="og:title" content="AWS CDK: Building a EventBridge scheduled Lambda that reads and writes to s3" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="<jinja2.runtime.BlockReference object at 0x7fdf77369540>" />
    <meta property="og:image" content="/assets/img/banner.png" />
    <meta property="og:description" content="A guide to building a serverless app using EventBridge, Lambda & s3 while introducing how to create, configure, test and deploy a CDK project using Python" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@cloudbytes_dev" />
    <meta name="twitter:title" content="AWS CDK: Building a EventBridge scheduled Lambda that reads and writes to s3" />
    <meta name="twitter:description" content="A guide to building a serverless app using EventBridge, Lambda & s3 while introducing how to create, configure, test and deploy a CDK project using Python" />
    <meta name="twitter:image" content="/assets/img/banner.png" />


    <!-- Theme -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- App -->
    <script defer src="/assets/js/app.js"></script>
    <!-- Ad
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0503340532690886"
        crossorigin="anonymous"></script>
         -->
</head>

<body>
    <!--Top nav-->
    <nav class="topnav">
<div style="visibility: visible;">
    <div id="search-open" class="item mega-dropdown" style="border-radius: 15px 0 0 15px;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
            <path fill="currentColor"
                d="M120.5891,106.37506,96.5609,80.39355l-3.842,3.8457-4.35187-4.35187c.33368-.43195.667-.864.98346-1.30475A46.77661,46.77661,0,1,0,77.87956,89.85687q.99472-.68619,1.955-1.42987l4.34509,4.345-4.31427,4.31409,26.5097,23.5246a10.0585,10.0585,0,1,0,14.21405-14.23566ZM74.21977,74.22931a32.4793,32.4793,0,1,1,9.48859-22.94189A32.48241,32.48241,0,0,1,74.21977,74.22931Z" />
        </svg>
    </div>
</div>

<div class="item" style="border-radius: 0;">
    <a href="https://github.com/CloudBytesDotDev/CloudBytes.dev/discussions" target="_blank" rel="noopener"
        aria-label="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
            <path fill="currentColor"
                d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
            </path>
        </svg>
    </a>
</div>

<div id="themeButton">
    <div id="dark" class="item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <g class="fa-group">
                <path fill="currentColor"
                    d="M320 32L304 0l-16 32-32 16 32 16 16 32 16-32 32-16zm138.7 149.3L432 128l-26.7 53.3L352 208l53.3 26.7L432 288l26.7-53.3L512 208z"
                    class="fa-secondary"></path>
                <path fill="currentColor"
                    d="M332.2 426.4c8.1-1.6 13.9 8 8.6 14.5a191.18 191.18 0 0 1-149 71.1C85.8 512 0 426 0 320c0-120 108.7-210.6 227-188.8 8.2 1.6 10.1 12.6 2.8 16.7a150.3 150.3 0 0 0-76.1 130.8c0 94 85.4 165.4 178.5 147.7z"
                    class="fa-primary"></path>
            </g>
        </svg>
    </div>
    <div id="light" class="item">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <g class="fa-group">
                <path fill="currentColor"
                    d="M502.42 240.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.41-94.8a17.31 17.31 0 0 0-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4a17.31 17.31 0 0 0 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.41-33.5 47.3 94.7a17.31 17.31 0 0 0 31 0l47.31-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3a17.33 17.33 0 0 0 .2-31.1zm-155.9 106c-49.91 49.9-131.11 49.9-181 0a128.13 128.13 0 0 1 0-181c49.9-49.9 131.1-49.9 181 0a128.13 128.13 0 0 1 0 181z"
                    class="fa-secondary"></path>
                <path fill="currentColor" d="M352 256a96 96 0 1 1-96-96 96.15 96.15 0 0 1 96 96z" class="fa-primary">
                </path>
            </g>
        </svg>
    </div>
</div>
<menu-toggler style="visibility: visible;">
    <div id="open" class="item  mega-dropdown" style="border-radius: 0 15px 15px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 32 32"
            style="enable-background:new 0 0 32 32;" xml:space="preserve">
            <g>
                <path fill="currentColor" d="M16,10c1.7,0,3-1.3,3-3s-1.3-3-3-3s-3,1.3-3,3S14.3,10,16,10z" />
                <path fill="currentColor" d="M16,13c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S17.7,13,16,13z" />
                <path fill="currentColor" d="M16,22c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S17.7,22,16,22z" />
            </g>
        </svg>
    </div>
    <div id="close" class="item mega-dropdowns" style="border-radius: 0 15px 15px 0; display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 72.434 72.44"
            style="enable-background:new 0 0 72.434 72.44;" xml:space="preserve">
            <path style="fill:currentColor;" d="M36.22,0C16.212,0,0,16.216,0,36.227c0,19.999,16.212,36.214,36.22,36.214
       c20.011,0,36.214-16.215,36.214-36.214C72.434,16.215,56.231,0,36.22,0z M52.058,46.82c1.379,1.424,0.953,4.078-0.959,5.932
       c-1.911,1.854-4.577,2.209-5.959,0.785l-9.027-9.295l-9.298,9.027c-1.421,1.379-4.075,0.947-5.929-0.961s-2.206-4.574-0.785-5.956
       l9.298-9.027l-9.027-9.298c-1.379-1.421-0.946-4.078,0.962-5.932c1.905-1.851,4.577-2.204,5.953-0.785l9.027,9.297l9.301-9.023
       c1.424-1.382,4.078-0.95,5.929,0.958c1.857,1.908,2.206,4.577,0.785,5.959l-9.295,9.024L52.058,46.82z" />
        </svg>
    </div>
</menu-toggler>

<div id="mega" class="mega-menu" style="visibility: hidden;">
    <div class="mega-main">
        <section>
            <h3>Content</h3>
            <ul>
                <li><a href="/snippets">Quick Snippets</a></li>
                <li><a href="/books">Books</a></li>
                <li><a href="/tags">#tags</a></li>
            </ul>
        </section>
        <section>
            <h3>Tags</h3>
            <ul>
                <li><a href="/tags/python">#python</a></li>
                <li><a href="/tags/aws">#aws</a></li>
                <li><a href="/tags/firebase">#firebase</a></li>
                <li><a href="/tags/python">#pelican</a></li>
            </ul>
        </section>
        <section>
            <h3>CloudBytes@</h3>
            <ul>
                <li><a href="http://github.com/CloudBytesDotDev">Github</a></li>
            </ul>
        </section>
    </div>
    <div class="row mega-footer">
        <span>CloudBytes</span> <a href="/terms">Terms</a> <a href="/privacy">Privacy</a>
    </div>
</div>
<div id="search" class="modal-overlay modal-show" style="visibility: hidden;">
    <div class="algolia-hits">
        <div class="algolia-form-wrap">
            <input placeholder="Search for bytes ..." type="text" id="algolia-input" class="algolia-input"
                autocomplete="off" />
            <span id="search-close" class="algolia-close btn btn-red">X</span>
        </div>
    </div>
</div><!--End Topnav-->
    </nav>
    <!--Top nav-->
    <script>
        // Theme toggler
        const themeNext = {
            dark: "light",
            light: "dark"
        };
        var theme = "dark";
        if (localStorage.getItem('theme')) {
            theme = localStorage.getItem('theme');
        }
        document.body.classList.remove('dark-theme', 'light-theme');
        document.body.classList.add(theme + '-theme');
        document.getElementById(themeNext[theme]).style.display = "flex";
        document.getElementById(theme).style.display = "none";
        // Theme button events
        var switchTheme = document.getElementById('themeButton');
        var toggleLight = document.getElementById('light');
        var toggleDark = document.getElementById('dark');
        switchTheme.addEventListener('click', function (e) {
            e.preventDefault();
        });
        toggleLight.addEventListener('click', function (e) {
            e.preventDefault();
            document.body.classList.add('light-theme');
            document.body.classList.remove('dark-theme');
            localStorage.setItem('theme', 'light');
            toggleLight.style.display = "none";
            toggleDark.style.display = "flex";
        });
        toggleDark.addEventListener('click', function (e) {
            e.preventDefault();
            document.body.classList.add('dark-theme');
            document.body.classList.remove('light-theme');
            localStorage.setItem('theme', 'dark');
            toggleLight.style.display = "flex";
            toggleDark.style.display = "none";
        });
    </script>
    <!-- Navbar -->
    <nav class="navbar">
<a href="/" id="home" class="item logo" style="opacity: 1;">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" class="svg-inline--fa fa-home fa-w-18"
        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
        <path fill="currentColor"
            d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z">
        </path>
    </svg>
    <span class="item-label tag tag-contrast tag-sm">Home</span>
</a>
<a href="/snippets" id="snippets" class="item">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="code" class="svg-inline--fa fa-code fa-w-20"
        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
        <path fill="currentColor"
            d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z">
        </path>
    </svg>
    <span class="item-label tag tag-contrast tag-sm">How-to Articles</span>
</a>
<a href="/books" id="books" class="item">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="book" class="svg-inline--fa fa-book fa-w-14"
        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
        <path fill="currentColor"
            d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z">
        </path>
    </svg>
    <span class="item-label tag tag-contrast tag-sm">Publications</span>
</a>
<a href="/tags" id="tags" class="item">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20"
        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
        <path fill="currentColor"
            d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z">
        </path>
    </svg>
    <span class="item-label tag tag-contrast tag-sm">Tags</span>
</a>    </nav>
    <!-- End Navbar -->

    <!-- Main Section -->
    <main>
<article class="content-pad">
    <div class="content-main">
        <section class="content-article">
<h1 id="title" class="article-title">AWS CDK: Building a EventBridge scheduled Lambda that reads and writes to s3</h1>
<div class="article-byline">
    <em>by <a href="/authors/rehan-haider">Rehan Haider</a>, Thu 12 August 2021</em>
    <span>
        <strong>Category</strong>:
        <a href="/snippets" class="tag tag-snippets">
            Snippets
        </a>
    </span>
</div>            <article id="content">
                <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#the-cdk-app-that-we-will-build">The CDK App that we will build</a><ul>
<li><a href="#components">Components</a></li>
</ul>
</li>
<li><a href="#setting-up-the-development-environment">Setting up the development environment</a></li>
<li><a href="#setting-up-the-project">Setting up the project</a></li>
<li><a href="#modifying-the-structure">Modifying the structure</a><ul>
<li><a href="#adding-lambda-handler">Adding Lambda Handler</a></li>
</ul>
</li>
<li><a href="#defining-the-lambda-function">Defining the lambda function</a></li>
<li><a href="#define-eventbridge-schedules-and-lambda-access-permission">Define EventBridge Schedules and Lambda access permission</a></li>
<li><a href="#giving-lambda-access-to-s3-bucket-to-read-and-write-files">Giving Lambda access to S3 bucket to read and write files</a></li>
<li><a href="#create-a-dependencies-layer-in-lambda-cdk">Create a dependencies layer in Lambda CDK</a></li>
<li><a href="#upload-the-coordinates-file-to-s3">Upload the coordinates file to S3</a></li>
<li><a href="#writing-the-lambda-app">Writing the lambda app</a></li>
<li><a href="#deploy-the-cdk-project">Deploy the CDK project</a></li>
<li><a href="#cleanup-destroy-the-cdk-project">Cleanup &amp; Destroy the CDK project</a></li>
</ul>
</div>
<p>AWS Cloud Development Kit, also known as <a href="https://aws.amazon.com/cdk/">CDK</a>, is an Open Source Software Development Framework that is maintained by AWS.</p>
<p>CDK is supposed to be the umbrella SDK from AWS, which can also easily integrate with <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html">AWS SAM CLI</a> and also <a href="https://aws.github.io/chalice/">AWS Chalice</a>, two other open source SDKs that AWS provides. </p>
<p>Now, there are hundreds of simple guides that explains how to setup a simple Lambda app using CDK, but in this article we'll build a bit more complex example. </p>
<h2 id="the-cdk-app-that-we-will-build">The CDK App that we will build</h2>
<p>We'll build a Lambda app that runs at a specified time (using EventBridge). The Lambda app will read a file from S3 bucket that contains latitude and longiture stored in a CSV format. Then the Lambda app will fetch the sunrise &amp; sunset times for those coordinates and save it to another file in S3. </p>
<p><img alt="CDK App architecure" src="http://localhost:8080/images/99999981-suntimes.png"></p>
<h3 id="components">Components</h3>
<p>Before we get into the weeds, let's look at what are the components that we will need to configure</p>
<ol>
<li><strong>Sun timings API</strong>: We'll use a public API endpoint, <code>https://sunrise-sunset.org/api</code></li>
<li><strong>EventBridge</strong>: An event generated at a specified time using Cron. This event will be used to invoke Lambda. EventBridge needs to have permissing to send target the Lambda function for invocation</li>
<li><strong>S3 Object with Coordinates</strong>: A file that contains a list of coordinates. </li>
<li><strong>S3 Object with output</strong>: This will be created by Lambda</li>
<li><strong>Lambda Function</strong>: A Lambda function that reads the list of coordinates from S3, fetches the sunrise / sunset times for them, converts them to JSON and saves it in S3. Lambda will require read &amp; write permission to S3. To read and write from S3 we will use AWS Boto Library</li>
</ol>
<h2 id="setting-up-the-development-environment">Setting up the development environment</h2>
<p>You need <a href="https://docs.docker.com/get-docker/">Docker</a> &amp; <a href="https://code.visualstudio.com/download">VSCode</a> to be installed on your system for this guide. Download fromt he provided links and install. </p>
<p>Then follow the following steps. </p>
<p><strong>Step 1</strong>: Install Python using <a href="http://localhost:8080/snippets/how-to-install-check-python-version-and-update-it">these instructions</a>.</p>
<p><strong>Step 2</strong>: <a href="http://localhost:8080/snippets/build-deploy-serverless-apps-on-aws-with-sam-cli#install-aws-cli">Install AWS CLI</a></p>
<p><strong>Step 3</strong>: <a href="http://localhost:8080/snippets/build-deploy-serverless-apps-on-aws-with-sam-cli#configuring-aws-aws-cli">Configure AWS &amp; AWS CLI</a></p>
<p><strong>Step 4</strong>: <a href="https://docs.aws.amazon.com/cdk/latest/guide/getting_started.html#getting_started_install">Install and configure AWS CDK</a></p>
<p><strong>Step 5</strong>: Bootstrap the CDK, i.e. configure your AWS account to be able to use CDK. 
To do this first run the following AWS CLI command</p>
<div class="highlight"><pre><span></span><code>aws sts get-caller-identity
</code></pre></div>

<p>This will produce an output similar to below that will provide the AWS account number, and user-id.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;UserId&quot;</span><span class="p">:</span> <span class="s2">&quot;XXXXXXXXXXXXXX&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Account&quot;</span><span class="p">:</span> <span class="s2">&quot;000000000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Arn&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::000000000000:user/cloudbytes&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p>Then run the below command replacing account &amp; userID</p>
<div class="highlight"><pre><span></span><code>cdk bootstrap aws://&lt;Account&gt;/&lt;UserID&gt;
</code></pre></div>

<h2 id="setting-up-the-project">Setting up the project</h2>
<p>Create a new folder for the project, CDK requires an empty folder to initialise</p>
<div class="highlight"><pre><span></span><code>mkdir cdk-tutorial
cd cdk-tutorial
</code></pre></div>

<p>After that, create a new CDK project by running</p>
<div class="highlight"><pre><span></span><code>cdk init app --language python
</code></pre></div>

<blockquote>
<p><code>app</code> in the above is a template, don't change it</p>
</blockquote>
<p>This will produce a bunch of files in the below structure</p>
<div class="highlight"><pre><span></span><code>├── README.md
├── app.py
├── cdk.json
├── cdk_tutorial
│   ├── __init__.py
│   └── cdk_tutorial_stack.py
├── requirements.txt
├── setup.py
└── source.bat
</code></pre></div>

<p>It will also create a virtual environment, to active run the below on Linux / MacOS</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span> .venv/bin/activate
</code></pre></div>

<p>Or on Windows, run</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="n">venv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">activate</span><span class="p">.</span><span class="n">bat</span>
</code></pre></div>

<p>Then finally run the below to install the project dependencies,</p>
<div class="highlight"><pre><span></span><code>python3 -m pip install -r requirements.txt
</code></pre></div>

<blockquote>
<p>These are the libraries used by your project, not the actual Lambda app. We will define that later</p>
</blockquote>
<h2 id="modifying-the-structure">Modifying the structure</h2>
<p>Now the above initialisation has created 3 important files</p>
<ol>
<li><code>app.py</code>: This contains the initialisation of the app itself. This doesn't require any change unless you are changing the name of the app itself.</li>
<li><code>cdk_tutorial/cdk_tutorial_stack.py</code>: This is where we will define our app construct, i.e. the services that we will use, the permissions that we need, etc. </li>
<li><code>setup.py</code>: This contains certain project information such as libraries etc. </li>
</ol>
<h3 id="adding-lambda-handler">Adding Lambda Handler</h3>
<p>Create a folder named <code>lambda</code> and under the folder create two files
1. <code>__init__.py</code>: Should be an empty file
2. <code>index.py</code>: Leave the contents blank for now</p>
<h2 id="defining-the-lambda-function">Defining the lambda function</h2>
<p>Go to <code>cdk_tutorial/cdk_tutorial_stack.py</code>, and change the imports as per below</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">aws_cdk</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">cdk</span><span class="p">,</span> <span class="n">aws_lambda</span><span class="p">,</span> <span class="n">aws_events_targets</span> <span class="k">as</span> <span class="n">targets</span><span class="p">,</span> <span class="n">aws_events</span> <span class="k">as</span> <span class="n">events</span><span class="p">,</span> <span class="n">aws_s3</span> <span class="k">as</span> <span class="n">s3</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
</code></pre></div>

<p>Then change the main program as per below</p>
<div class="highlight"><pre><span></span><code><span class="c1"># app.py</span>
<span class="k">class</span> <span class="nc">CdkTutorialStack</span><span class="p">(</span><span class="n">cdk</span><span class="o">.</span><span class="n">Stack</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">cdk</span><span class="o">.</span><span class="n">Construct</span><span class="p">,</span> <span class="n">construct_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">construct_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Define a lambda function</span>
        <span class="n">lambdaFn</span> <span class="o">=</span> <span class="n">aws_lambda</span><span class="o">.</span><span class="n">Function</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;cdk-tutorial&quot;</span><span class="p">,</span>
            <span class="n">code</span><span class="o">=</span><span class="n">aws_lambda</span><span class="o">.</span><span class="n">Code</span><span class="o">.</span><span class="n">from_asset</span><span class="p">(</span><span class="s2">&quot;lambda&quot;</span><span class="p">),</span>
            <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;index.main&quot;</span><span class="p">,</span>
            <span class="n">runtime</span><span class="o">=</span><span class="n">aws_lambda</span><span class="o">.</span><span class="n">Runtime</span><span class="o">.</span><span class="n">PYTHON_3_8</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">create_dependencies_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack_name</span><span class="p">,</span> <span class="s2">&quot;lambda/index&quot;</span><span class="p">)],</span>
        <span class="p">)</span>
</code></pre></div>

<p>Here we use <code>code</code> variable to import our code from <code>lambda</code> folder, then define Lambda handler to be <code>main()</code> method under <code>index.py</code> file by using <code>handler="index.main"</code>.</p>
<p>We also define the runtime to be Python 3.8 and a layer that is explained later. </p>
<h2 id="define-eventbridge-schedules-and-lambda-access-permission">Define EventBridge Schedules and Lambda access permission</h2>
<p>Add the below code under where we defined lambda function</p>
<div class="highlight"><pre><span></span><code>        <span class="n">rule</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">Rule</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;Run Daily at 21:30 hrs UTC&quot;</span><span class="p">,</span>
            <span class="c1"># UTC + 0 time. ~3 AM IST</span>
            <span class="n">schedule</span><span class="o">=</span><span class="n">events</span><span class="o">.</span><span class="n">Schedule</span><span class="o">.</span><span class="n">cron</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="s2">&quot;30&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="s2">&quot;21&quot;</span><span class="p">,</span> <span class="n">week_day</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">rule</span><span class="o">.</span><span class="n">add_target</span><span class="p">(</span><span class="n">targets</span><span class="o">.</span><span class="n">LambdaFunction</span><span class="p">(</span><span class="n">lambdaFn</span><span class="p">))</span>
</code></pre></div>

<p>This simple definition has two parts
1. Where we define an Eventbridge rule that runs everyday as 9:30 PM UTC. The event schedule is always expressed in UTC timezone
2. We add a target to the lambda function that we created, <code>lambdaFn</code></p>
<p>That's it, two statements to create and then give permission to EventBridge to invoke a Lambda function.</p>
<h2 id="giving-lambda-access-to-s3-bucket-to-read-and-write-files">Giving Lambda access to S3 bucket to read and write files</h2>
<p>For this you need the name of the bucket that you want access to, in this example let's use <code>cloudbytes-dev</code>, you can replace it with bucket of your choice that you are using.</p>
<p>To provide access, we first define the bucket construct and then grant read &amp; write permission as per below</p>
<div class="highlight"><pre><span></span><code>        <span class="n">my_bucket</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">Bucket</span><span class="o">.</span><span class="n">from_bucket_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Bucket&quot;</span><span class="p">,</span> <span class="s2">&quot;cloudbytes-dev&quot;</span><span class="p">)</span>
        <span class="n">my_bucket</span><span class="o">.</span><span class="n">grant_read_write</span><span class="p">(</span><span class="n">lambdaFn</span><span class="p">)</span>
</code></pre></div>

<h2 id="create-a-dependencies-layer-in-lambda-cdk">Create a dependencies layer in Lambda CDK</h2>
<p>For our program we are going to use Python's <code>requests</code> library, however, this is not available by default on Lambda, so we need to upload this while creating our project. </p>
<p>To do that, we need to do two things, first, add the below function in your <code>app.py</code></p>
<div class="highlight"><pre><span></span><code>    <span class="k">def</span> <span class="nf">create_dependencies_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_name</span><span class="p">,</span> <span class="n">function_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aws_lambda</span><span class="o">.</span><span class="n">LayerVersion</span><span class="p">:</span>
        <span class="n">requirements_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;requirements.app.txt&quot;</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;.build/app&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SKIP_PIP&quot;</span><span class="p">):</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pip install -r </span><span class="si">{</span><span class="n">requirements_file</span><span class="si">}</span><span class="s2"> -t </span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s2">/python&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

        <span class="n">layer_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">project_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">-dependencies&quot;</span>
        <span class="n">layer_code</span> <span class="o">=</span> <span class="n">aws_lambda</span><span class="o">.</span><span class="n">Code</span><span class="o">.</span><span class="n">from_asset</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">aws_lambda</span><span class="o">.</span><span class="n">LayerVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">layer_code</span><span class="p">)</span>
</code></pre></div>

<p>Then create a file named <code>requirements.app.txt</code> in your project root (where requirements.txt is) and add the following in that file</p>
<div class="highlight"><pre><span></span><code>requests==2.26.0
boto3==1.18.24
</code></pre></div>

<p>(Optional) Install these in your virtual environment by running</p>
<div class="highlight"><pre><span></span><code>python3 -m pip install -r requirements.app.txt
</code></pre></div>

<h2 id="upload-the-coordinates-file-to-s3">Upload the coordinates file to S3</h2>
<p>Copy the below in a file and name it <code>coordinates.csv</code></p>
<div class="highlight"><pre><span></span><code>latitude,longitude
-33.865143,151.209900
22.572645,88.363892
</code></pre></div>

<p>Upload this file to the S3 bucket that you are going to use</p>
<h2 id="writing-the-lambda-app">Writing the lambda app</h2>
<p>Go back to you <code>lambda</code> folder that we craete earlier and opent he <code>index.py</code> file</p>
<p>Add the following code to the file</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">botocore</span> <span class="kn">import</span> <span class="n">endpoint</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;s3&quot;</span><span class="p">)</span>
    <span class="n">bucket</span> <span class="o">=</span> <span class="s2">&quot;cloudbytes-dev&quot;</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;coordinates.csv&quot;</span>
    <span class="c1"># Download the coordinate files from S3</span>
    <span class="n">s3</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/tmp/</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/tmp/</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">endpoint</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.sunrise-sunset.org/json?lat=</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;lng=</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;sunrise&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;sunrise&quot;</span><span class="p">]</span>
            <span class="n">row</span><span class="p">[</span><span class="s2">&quot;sunset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;sunset&quot;</span><span class="p">]</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="n">output_file</span> <span class="o">=</span> <span class="s2">&quot;suntimes.json&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/tmp/</span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)))</span>

        <span class="c1"># Upload the output file to S3</span>
        <span class="n">s3</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/tmp/</span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">bucket</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="deploy-the-cdk-project">Deploy the CDK project</h2>
<p>Before deploying we first need to synthesis (or generate the project CloudFormation template) by running</p>
<div class="highlight"><pre><span></span><code>cdk synth
</code></pre></div>

<p>This will generate a lengthy CloudFormation output in the console.</p>
<p>Finally, we deploy the project by running</p>
<div class="highlight"><pre><span></span><code>cdk deploy
</code></pre></div>

<p>If asked for a confirmation, press <code>Y</code> to deploy. </p>
<p>Now you can go to your AWS console, go to lambda section and test the function. </p>
<h2 id="cleanup-destroy-the-cdk-project">Cleanup &amp; Destroy the CDK project</h2>
<p>We created several resources and policies as part of this tutorial, instead of deleting them one by one, just run </p>
<div class="highlight"><pre><span></span><code>cdk destroy
</code></pre></div>

<p>This will clean up the project competely. </p>
<p>And this is how you build a complex Lambda application on AWS</p>
            </article>
            <h5>Need Help? <a href="https://github.com/CloudBytesDotDev/CloudBytes.dev/discussions">Open a discussion
                    thread on GitHub</a>.</h5>
<div class="article-tags">
    <a href="/tags/aws"><span class="tag tag-aws">#aws</span></a>
    <a href="/tags/python"><span class="tag tag-python">#python</span></a>
</div>            <hr>
<div>
    <h3 style="margin: 10px 0;">Related Posts</h3>
</div>
<div class="chapters-list">
    <div class="chapters-wrap">
        <a href="/snippets/mount-aws-credentials-on-vscode-devcontainers">
            <div class="box box-sm chapter-item">
                <i class="box-icon">
                    <div>
                        <i class="emoji">📄</i>
                    </div>
                </i>
                <div class="box-content">
                    <span class="subtext">Mount AWS Credentials on VSCode Devcontainers</span>
                </div>
            </div>
        </a>
        <a href="/snippets/run-chrome-extensions-with-python-selenium-on-aws-lambda">
            <div class="box box-sm chapter-item">
                <i class="box-icon">
                    <div>
                        <i class="emoji">📄</i>
                    </div>
                </i>
                <div class="box-content">
                    <span class="subtext">Run Chrome extensions with Python Selenium on AWS Lambda</span>
                </div>
            </div>
        </a>
        <a href="/snippets/configure-logging-in-aws-lambda-to-cloudwatch-using-python">
            <div class="box box-sm chapter-item">
                <i class="box-icon">
                    <div>
                        <i class="emoji">📄</i>
                    </div>
                </i>
                <div class="box-content">
                    <span class="subtext">Configure logging in AWS Lambda to CloudWatch using Python</span>
                </div>
            </div>
        </a>
        <a href="/snippets/run-selenium-in-aws-lambda-for-ui-testing">
            <div class="box box-sm chapter-item">
                <i class="box-icon">
                    <div>
                        <i class="emoji">📄</i>
                    </div>
                </i>
                <div class="box-content">
                    <span class="subtext">Run Selenium in AWS Lambda for UI testing</span>
                </div>
            </div>
        </a>
        <a href="/snippets/run-aws-lambda-using-custom-docker-container">
            <div class="box box-sm chapter-item">
                <i class="box-icon">
                    <div>
                        <i class="emoji">📄</i>
                    </div>
                </i>
                <div class="box-content">
                    <span class="subtext">Run AWS Lambda using custom docker container</span>
                </div>
            </div>
        </a>
    </div>
</div>
        </section>
    </div>

</article>
        <aside class="sidebar">
<div class="recourse" style="text-align:center">
    <div class="box chapter-item">
        <div class="box-content">
            <a href="https://click.linksynergy.com/link?id=zOWbNCBDzko&offerid=1060092.2196488&type=2&murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Faws-certified-solutions-architect-associate-saa-c02%2F" rel="nofollow" style="text-decoration:none">
                <div>
                    <h3 style="border-bottom: 2px white;">📽️ Curated Tutorial</h3>
                    <hr style="border-color:var(--text-color)">
                    <hr style="border-color:var(--text-color)">
                </div>
                <div class=" banner">
                    <IMG border=0 src="https://img-c.udemycdn.com/course/480x270/2196488_8fc7_7.jpg">
                    <h4>
                        Ultimate AWS Certified Solutions Architect Associate 2022
                    </h4>
                    <p style="font-size:.75em">
                        Full Practice Exam Learn Cloud Computing Pass the AWS Certified Solutions Architect Associate Certification SAA-C02!!
                    </p>
                    <h4>
                        <u>Click Here for more info!</u>
                    </h4>
                </div>
            </a>
            <IMG border=0 width=1 height=1 src="https://ad.linksynergy.com/fs-bin/show?id=zOWbNCBDzko&bids=1060092.2196488&type=2&subid=0">
        </div>
    </div>
</div>
        </aside>
    </main>
    <!-- End of Main Section -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- Footer -->

    <footer>
<div class="footer-row">
    <h3>Want to improve this guide? Submit your changes on <a
            href="https://github.com/CloudBytesDotDev/CloudBytes.dev/tree/main/content/articles/99999981-aws-cloud-development-kit.md">GitHub.</a>
    </h3>
    <p class="copyright">Copyright &copy; 2020 - 2022 CloudBytes. All rights reserved.</p>
    <ul>
        <li class="footer-nav"><a href="/terms">Terms</a></li>
        <li class="footer-nav"><a href="/privacy">Privacy Policy</a></li>
        <li class="footer-nav"><a href="/sitemap.xml">Sitemap</a></li>
    </ul>
</div>    </footer>
</body>
<!-- Include AlgoliaSearch JS Client and autocomplete.js library -->
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<!-- Initialize autocomplete menu -->
<script>
    var client = algoliasearch("XE8PCLJHAE", "ec75de1d8ce87dee234a2fd47cec2d76");
    var index = client.initIndex('cloudbytes_dev');
    //initialize autocomplete on search input (ID selector must match)
    autocomplete('#algolia-input',
        { hint: false }, {
        source: autocomplete.sources.hits(index, { hitsPerPage: 10 }),
        //value to be displayed in input control after user's suggestion selection
        displayKey: 'title',
        //hash of templates used when rendering dataset
        templates: {
            //'suggestion' templating function used to render a single suggestion
            suggestion: function (suggestion) {
                return '<a class="algolia-hit" href="/' + suggestion.url + '">' +
                    '<h4>' +
                    '<span class="hit-title">' + suggestion._highlightResult.title.value + '</span>' +
                    '</h4>' +
                    '</a>'
            }
        }
    });
</script>

</html>